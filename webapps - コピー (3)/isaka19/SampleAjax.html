<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<title>Ajax</title>
</head>
<body>

<form name="io">
  <input type="button" name="execute" value="実行">
  <input type="text" name="input1">
  <input type="text" name="input2">
  <output name="output"></output>
</form>

<script>
document.io.execute.addEventListener("click", function () {
  var url = "/isaka1919/sampleservlet";
  var value1 = document.io.input1.value;
  var value2 = document.io.input2.value;
  var request = "input1" + "=" + value1 + "&" + "input2" + "=" + value2;
  var callback = function (response) {document.io.output.innerHTML = response["key1"] + "," + response["key2"];};
  $post(url, request, callback);
});
</script>

<script>
function $post(url, request, callback) {
  var xhr = new XMLHttpRequest();
  xhr.onreadystatechange = function () {
    if (this.readyState == 4 && this.status == 200) {
      callback(JSON.parse(this.responseText));
    }
  };
  xhr.open("post", url, true);
  xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  xhr.send(request);
}
</script>

</body>
</html>